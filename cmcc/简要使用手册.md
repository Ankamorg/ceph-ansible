# 部署
```
ansible-playbook site.yml -v -i inventory  --extra-vars  \
'{"ceph_stable": true, \ 
"ceph_origin": "distro", \
"monitor_interface": "bond1", \
"journal_collocation": true, \
"journal_size": 10240, \
"public_network": "192.168.10.0/24", \
"cluster_network": "192.168.10.0/24", \
"cephx": true, \
"ntp_service_enabled": "false", \
"osd_crush_tunables_optimal": true \
}' -u onest -f 200
```

# 更新mon的脚本update_cephconf_mon.sh
```
ansible-playbook push_conf_mon.yml -v  -i  inventory  --extra-vars \
'{"monitor_interface": "bond1", \
"journal_size": 10240, \
"public_network": "192.168.10.0/24", \
"cluster_network": "192.168.10.0/24", \
"osd_crush_tunables_optimal": true , \
"fsid":"5396edbb-af1f-4042-9998-2063e1c21b35" \
}' -u onest -f 200
```
其中 push_conf_mon.yml 如下：

```
[onest@NFJD-PSC-oNest-Mst-SV1 ceph-ansible]$ cat push_conf_mon.yml 
---
# push ceph.conf to nodes
# Need to load the facts from mons because ceph-common need them to generate the ceph.conf
- hosts:
    - mons
  become: True
  roles:
    - { role: ceph-push-conf }
  vars:
    - devices: []
```
执行更新
```
chmod +x update_cephconf_mon.sh &&　./update_cephconf_mon.sh
```


# 更新osd的脚本update_cephconf_osd.sh
```
ansible-playbook push_conf_osd.yml -v  -i  inventory  --extra-vars \
'{"monitor_interface": "bond1", \
"journal_size": 10240, \
"public_network": "192.168.10.0/24", \
"cluster_network": "192.168.10.0/24", \
"osd_crush_tunables_optimal": true , \
"fsid":"5396edbb-af1f-4042-9998-2063e1c21b35" \
}' -u onest -f 200
```
其中 push_conf_osd.yml 如下：

```
[onest@NFJD-PSC-oNest-Mst-SV1 ceph-ansible]$ cat push_conf_osd.yml 
---
# push ceph.conf to nodes
# Need to load the facts from mons because ceph-common need them to generate the ceph.conf
- hosts:
    - osds
  become: True
  roles:
    - { role: ceph-push-conf }
  vars:
    - devices: []
```
执行更新
```
chmod +x update_cephconf_osd.sh &&　./update_cephconf_osd.sh
```


# 更新osd的脚本update_cephconf_rgw.sh
```
ansible-playbook push_conf_rgw.yml -v  -i  inventory  --extra-vars \
'{"monitor_interface": "bond1", \
"journal_size": 10240, \
"public_network": "192.168.10.0/24", \
"cluster_network": "192.168.10.0/24", \
"osd_crush_tunables_optimal": true , \
"fsid":"5396edbb-af1f-4042-9998-2063e1c21b35" \
}' -u onest -f 200
```

其中 push_conf_osd.yml 如下：

```
[onest@NFJD-PSC-oNest-Mst-SV1 ceph-ansible]$ cat push_conf_rgw.yml 
---
# push ceph.conf to nodes
# Need to load the facts from mons because ceph-common need them to generate the ceph.conf
- hosts:
    - rgws
  become: True
  roles:
    - { role: ceph-push-conf }
  vars:
    - devices: []
```
执行更新
```
chmod +x update_cephconf_rgw.sh &&　./update_cephconf_rgw.sh
```
